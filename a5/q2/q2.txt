The bug is in the char* pop() function, at first ,it set a local variable-a struct element pointer e, and then it set this pointer points to where the pointer top pointing to, however it trying to return the value of where the e is pointing to after free the e. In this way, after it free the pointer e, the e has already become a dangling pointer, the memory it pointed to before is giving to other to use, when we say return e->name, it may not return the value the we expected. Thus we need to store the value of e->name before we free the pointer e.